<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>NYC Taxi Analytics Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <div class="layout">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                <span class="logo-mark">T</span>
                <span class="logo-text">AXI</span>
            </div>

            <nav class="sidebar-nav">
                <a href="#dashboard" class="nav-item active">üìä <span>Dashboard</span></a>
                <a href="#drivers" class="nav-item">üöï <span>Drivers</span></a>
                <a href="#rides" class="nav-item">üßç <span>Riders</span></a>
                <a href="#payment" class="nav-item">üí≥ <span>Payments</span></a>
                <a href="#reports" class="nav-item">üìë <span>Reports</span></a>
                <a href="#settings" class="nav-item">‚öôÔ∏è <span>Settings</span></a>
            </nav>
        </aside>

        <!-- CONTENIDO PRINCIPAL -->
        <div class="main">

            <!-- TOPBAR -->
            <header class="topbar">
                <div>
                    <h1 id="dashboard">NYC Yellow Taxi ‚Äì Big Data Analytics</h1>
                    <p class="topbar-sub">
                        An√°lisis de 1M de viajes: demanda, m√©todos de pago, propinas y simulaci√≥n de modelo de
                        clasificaci√≥n.
                    </p>
                </div>

            
            </header>

            <!-- M√âTRICAS SUPERIORES -->
            <section class="stats-row">
                <article class="stat-card">
                    <h4>Book Trips</h4>
                    <div class="stat-main">
                        <span class="stat-value">1,000,000</span>
                        <span class="stat-tag positive">+36.5%</span>
                    </div>
                    <p class="stat-desc">Viajes procesados del dataset 2016.</p>
                </article>

                <article class="stat-card">
                    <h4>Trips with Tip</h4>
                    <div class="stat-main">
                        <span class="stat-value">720,000</span>
                        <span class="stat-tag positive">+12.3%</span>
                    </div>
                    <p class="stat-desc">Proporci√≥n de viajes con propina registrada.</p>
                </article>

                <article class="stat-card">
                    <h4>Avg. Fare</h4>
                    <div class="stat-main">
                        <span class="stat-value">$14.25</span>
                        <span class="stat-tag neutral">‚âà</span>
                    </div>
                    <p class="stat-desc">Tarifa promedio por viaje.</p>
                </article>

                <article class="stat-card">
                    <h4>Total Earnings</h4>
                    <div class="stat-main">
                        <span class="stat-value">$14.2M</span>
                        <span class="stat-tag positive">+47.8%</span>
                    </div>
                    <p class="stat-desc">Ingresos estimados para todos los viajes.</p>
                </article>
            </section>

            <!-- GRID PRINCIPAL: GR√ÅFICAS + LATERAL -->
            <section class="analytics-grid">

                <!-- COLUMNA PRINCIPAL -->
                <div class="analytics-main">
                    <article class="card">
                        <header class="card-header">
                            <h3>Active Trips by Time</h3>
                            <div class="card-tabs">
                                <button class="tab active">Yesterday</button>
                                <button class="tab">7 days</button>
                                <button class="tab">30 days</button>
                            </div>
                        </header>
                        <canvas id="chartHora"></canvas>
                    </article>

                    <article class="card map-card">
                        <header class="card-header">
                            <h3>Heatmap de actividad</h3>
                            <span class="badge">NYC 2016</span>
                        </header>
                        <div class="map-body">
                            <div class="map-grid"></div>
                            <div class="map-taxi" style="top:22%; left:40%;">üöï</div>
                            <div class="map-taxi" style="top:60%; left:20%;">üöï</div>
                            <div class="map-taxi" style="top:45%; left:65%;">üöï</div>
                            <div class="map-taxi" style="top:70%; left:55%;">üöï</div>
                            <div class="map-legend">
                                <span class="dot high"></span> Alta demanda
                                <span class="dot medium"></span> Media
                                <span class="dot low"></span> Baja
                            </div>
                        </div>
                    </article>
                </div>

                <!-- COLUMNA LATERAL -->
                <aside class="analytics-side">

                    <article class="card small-card">
                        <header class="card-header">
                            <h3>Payment Methods</h3>
                        </header>
                        <canvas id="chartPago"></canvas>
                    </article>

                    <article class="card small-card">
                        <header class="card-header">
                            <h3>Fares Clusters</h3>
                        </header>
                        <canvas id="chartClusters"></canvas>
                    </article>

                    <article class="card small-card">
                        <header class="card-header">
                            <h3>Top Zonas con Propina</h3>
                        </header>
                        <ul class="top-list">
                            <li>
                                <div>
                                    <strong>Midtown Manhattan</strong>
                                    <small>Propinas altas en viajes cortos nocturnos.</small>
                                </div>
                                <span class="pill">89% tip</span>
                            </li>
                            <li>
                                <div>
                                    <strong>Upper East Side</strong>
                                    <small>Clientes frecuentes, tickets medios.</small>
                                </div>
                                <span class="pill">82% tip</span>
                            </li>
                            <li>
                                <div>
                                    <strong>JFK Airport</strong>
                                    <small>Viajes largos con tarifa fija.</small>
                                </div>
                                <span class="pill">78% tip</span>
                            </li>
                            <li>
                                <div>
                                    <strong>SoHo</strong>
                                    <small>Alta rotaci√≥n fin de semana.</small>
                                </div>
                                <span class="pill">75% tip</span>
                            </li>
                        </ul>
                    </article>

                </aside>
            </section>

            <!-- PANEL DE PREDICCI√ìN -->
            <section class="prediction-section" id="prediction">
                <article class="card prediction-card">
                    <header class="card-header">
                        <h3>Simulaci√≥n del modelo ‚Äì Probabilidad de Propina</h3>
                        <span class="badge secondary">Clasificaci√≥n binaria</span>
                    </header>

                    <div class="prediction-layout">

                        <!-- FORM -->
                        <div class="prediction-form">
                            <h4>Configura un viaje</h4>

                            <label>Distancia del viaje (millas)</label>
                            <input id="pred-distance" type="number" min="0" step="0.1" placeholder="Ej: 3.5">

                            <label>Hora del d√≠a (0 - 23)</label>
                            <input id="pred-hour" type="number" min="0" max="23" placeholder="Ej: 21">

                            <label>M√©todo de pago</label>
                            <select id="pred-payment">
                                <option value="card">Tarjeta</option>
                                <option value="cash">Efectivo</option>
                            </select>

                            <button type="button" onclick="predictTip()">Calcular probabilidad</button>
                        </div>

                        <!-- RESULTADO -->
                        <div class="prediction-result-panel">
                            <h4>Resultado de la predicci√≥n</h4>
                            <div id="prediction-result" class="prediction-result">
                                Ingresa un viaje para estimar la probabilidad de propina.
                            </div>
                            <div class="prediction-note">
                                <p>
                                    *Esta simulaci√≥n se basa en patrones encontrados en el dataset:
                                    viajes nocturnos, de mayor distancia y pagados con tarjeta suelen
                                    tener mayor probabilidad de propina.
                                </p>
                            </div>

                            <!-- üî• NUEVO CONTENEDOR PEQUE√ëO -->
                            <div class="prediction-chart-wrapper">
                                <canvas id="chartPropina" class="prediction-chart"></canvas>
                            </div>
                        </div>


                    </div>
                </article>
            </section>

        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>